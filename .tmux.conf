# ========================================
# PREFIX - Choose ONE of these options
# ========================================

# Option 1: Ctrl+a (recommended for beginners)
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Option 2: Ctrl+Space (my favorite - uncomment to use)
# unbind C-b
# set -g prefix C-Space
# bind C-Space send-prefix

# Option 3: Backtick ` (uncomment to use)
# unbind C-b
# set -g prefix `
# bind ` send-prefix

# ========================================
# ERGONOMIC IMPROVEMENTS
# ========================================
set -g allow-passthrough on

# Smart pane switching with awareness of Vim splits.
is_vim="ps -o state= -o comm= -t '#{pane_tty}' \
    | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"
bind-key -n 'C-h' if-shell "$is_vim" 'send-keys C-h'  'select-pane -L'
bind-key -n 'C-j' if-shell "$is_vim" 'send-keys C-j'  'select-pane -D'
bind-key -n 'C-k' if-shell "$is_vim" 'send-keys C-k'  'select-pane -U'
bind-key -n 'C-l' if-shell "$is_vim" 'send-keys C-l'  'select-pane -R'

bind-key -n 'C-\' if-shell "$is_vim" 'send-keys C-\\\\'  'select-pane -l'

# For tmux copy mode
bind-key -T copy-mode-vi 'C-h' select-pane -L
bind-key -T copy-mode-vi 'C-j' select-pane -D
bind-key -T copy-mode-vi 'C-k' select-pane -U
bind-key -T copy-mode-vi 'C-l' select-pane -R
bind-key -T copy-mode-vi 'C-\' select-pane -l

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Reload config with Ctrl+a r
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# Better split commands (| and -)
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# Vim-style pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Vim-style copy mode
setw -g mode-keys vi
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-selection-and-cancel

# Mouse support (yes, really!)
set -g mouse on

# Increase history
set -g history-limit 10000

# No delay for escape key
set -sg escape-time 0

# ========================================
# BEAUTIFUL STATUS BAR
# ========================================

# Status bar general settings
set -g status-interval 1
set -g status-position bottom
set -g status-justify left
set -g status-style 'bg=#1e1e2e,fg=#cdd6f4'

# Left side - Session info with icon
set -g status-left-length 100
set -g status-left '#[bg=#89b4fa,fg=#1e1e2e,bold] 󰣇 #S #[bg=#1e1e2e,fg=#89b4fa] '

# Right side - System info with icons
set -g status-right-length 100
set -g status-right '#[fg=#f38ba8] #[fg=#cdd6f4]#{cpu_percentage} #[fg=#89dceb] #[fg=#cdd6f4]%H:%M #[fg=#a6e3a1] #[fg=#cdd6f4]%d %b #[bg=#a6e3a1,fg=#1e1e2e,bold] #{user}@#H '

# Window status format
setw -g window-status-format '#[fg=#6c7086] #I:#W#F '
setw -g window-status-current-format '#[bg=#89b4fa,fg=#1e1e2e,bold] #I:#W#F #[bg=#1e1e2e,fg=#89b4fa]'

# Window separator
setw -g window-status-separator ''

# Pane border colors (matches status bar theme)
set -g pane-border-style 'fg=#45475a'
set -g pane-active-border-style 'fg=#89b4fa'

# Message styling
set -g message-style 'bg=#89b4fa,fg=#1e1e2e,bold'
set -g message-command-style 'bg=#f38ba8,fg=#1e1e2e,bold'

# Pane number display
set -g display-panes-active-colour '#89b4fa'
set -g display-panes-colour '#45475a'

# Clock mode
setw -g clock-mode-colour '#89b4fa'

# ========================================
# ALTERNATIVE: Minimal Powerline Style
# ========================================
# Uncomment the section below for a different look

# set -g status-style 'bg=#2e3440,fg=#d8dee9'
# set -g status-left '#[bg=#88c0d0,fg=#2e3440,bold] ❐ #S #[bg=#2e3440,fg=#88c0d0]'
# set -g status-right '#[fg=#88c0d0]#[bg=#88c0d0,fg=#2e3440] %H:%M #[bg=#88c0d0,fg=#5e81ac]#[bg=#5e81ac,fg=#eceff4,bold] %d-%b-%y '
# setw -g window-status-format '#[fg=#81a1c1] #I #W '
# setw -g window-status-current-format '#[bg=#5e81ac,fg=#eceff4,bold] #I #W #[bg=#2e3440,fg=#5e81ac]'

# ========================================
# ALTERNATIVE: Dracula Theme
# ========================================
# Uncomment for Dracula colors

# set -g status-style 'bg=#282a36,fg=#f8f8f2'
# set -g status-left '#[bg=#bd93f9,fg=#282a36,bold]  #S #[bg=#282a36,fg=#bd93f9]'
# set -g status-right '#[fg=#ff79c6] CPU: #{cpu_percentage} #[fg=#8be9fd] %H:%M #[fg=#50fa7b] %d %b #[bg=#50fa7b,fg=#282a36,bold] #(whoami) '
# setw -g window-status-format '#[fg=#6272a4] #I:#W '
# setw -g window-status-current-format '#[bg=#ff79c6,fg=#282a36,bold] #I:#W #[bg=#282a36,fg=#ff79c6]'
# set -g pane-active-border-style 'fg=#bd93f9'
