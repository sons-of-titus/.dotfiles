# MPV Media Player Configuration
# This file sources all configuration modules from conf.d/

# Note: MPV doesn't support include directives in config files
# All settings are consolidated here, organized by section

# ============================================================================
# VIDEO CONFIGURATION
# ============================================================================

# Video output driver (auto-detect best available)
vo=gpu

# Hardware acceleration
hwdec=auto-safe

# Video scaling algorithm
scale=ewa_lanczossharp
cscale=ewa_lanczossharp

# Interpolation (smooth motion)
interpolation=yes
tscale=oversample

# Subtitle settings
sub-auto=fuzzy
sub-file-paths=subs:subtitles:Subs:Subtitles
sub-font-size=40
sub-bold=yes
sub-border-color=0.0/0.0/0.0
sub-border-size=2.5

# Video filters
vf=format=yuv420p

# Deinterlacing
deinterlace=auto

# ============================================================================
# AUDIO CONFIGURATION
# ============================================================================

# Audio output driver
ao=pulse

# Volume
volume=100
volume-max=200

# Audio normalization
audio-normalize-downmix=yes

# Audio filters
af=lavfi=[loudnorm=I=-16:TP=-1.5:LRA=11]

# Audio channels
audio-channels=auto

# Audio buffer
audio-buffer=0.2

# ============================================================================
# PERFORMANCE CONFIGURATION
# ============================================================================

# Cache settings
cache=yes
cache-secs=60
demuxer-max-bytes=500M
demuxer-max-back-bytes=200M

# Threading
vd-lavc-threads=0
vd-lavc-fast=yes

# Frame dropping
framedrop=decoder+vo
video-sync=display-resample

# GPU rendering
gpu-context=auto
gpu-api=auto

# ============================================================================
# APPEARANCE CONFIGURATION
# ============================================================================

# Window settings
no-border
keepaspect-window=yes
autofit=80%
geometry=50%:50%

# On-screen display
osd-bar=yes
osd-bar-align-y=1
osd-bar-w=100
osd-bar-h=1
osd-bar-border-size=2
osd-font-size=30
osd-color="#FFFFFFFF"
osd-border-color="#FF000000"
osd-border-size=3.0
osd-shadow-offset=1
osd-shadow-color="#33000000"
osd-blur=0
osd-margin-x=25
osd-margin-y=25
osd-align-x=left
osd-align-y=top

# Cursor
cursor-autohide=1000
cursor-autohide-fs-only=yes

# Title
title=${media-title}

# Background color (for images)
# background=#262626

# Screenshot
screenshot-format=png
screenshot-png-compression=7
screenshot-tag-colorspace=yes
screenshot-directory=~/Pictures/screenshots

# ============================================================================
# ADVANCED CONFIGURATION
# ============================================================================

# Logging
log-file=~~/mpv.log
msg-level=all=v

# Network
user-agent="Mozilla/5.0"
referrer="https://www.google.com/"

# Scripts
script-opts=ytdl_hook-ytdl_path=yt-dlp
ytdl-format=bestvideo[height<=?1080]+bestaudio/best

# Playback
save-position-on-quit=yes
watch-later-options=start,vid,aid,sid
resume-playback-check-mtime=yes

# Terminal output
# terminal=yes  # This is a command-line flag, not a config option
quiet=no
really-quiet=no

# JSON IPC
input-ipc-server=/tmp/mpv-socket

# Media keys (if supported)
# media-keys=yes  # Not available in this mpv version

# Idle
stop-screensaver=yes

# Input configuration (loaded from separate file)
input-conf=~/.config/mpv/input.conf
